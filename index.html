<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="user-scalable=yes, width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
<title>음성 입력 금액 기록기 (모바일)</title>
<link rel="icon" href="data:;base64,=">
<link rel="StyleSheet" href="css/style.css" type="text/css">
<style>

</style>
</head>
<body>
<div id="container" class="container">
  <div class="header">
    <div class="h-title">간편 음성 금액 기록기</div>
    <div class="btn_wrap">
      <button id="exportBtn" title="엑셀로 저장" class="save-icon"><img src='img/excel-icon.png'></button>
    </div>
  </div>

  <!-- START: HOME -->
  <div id="home" class="start-area">
    <div style="text-align:center">
      <div style="font-size:20px;font-weight:700;margin-bottom:6px">시작 혹은 이어하기</div>
      <div class="small">기록은 브라우저 로컬에 저장됩니다.</div>
    </div>

    <div style="display:flex;gap:12px">
      <button id="startBtn" class="btn primary">새로시작</button>
      <button id="continueBtn" class="btn ghost">이어하기</button>
    </div>
  </div>

  <!-- MAIN APP -->
  <div id="app" class="app">
    <div class="topbar">
      <div class="small">실시간 입력/수정 가능 — 말 한 번으로 이름+금액 입력</div>
      <div class="small" id="statusHint">저장된 항목: 0</div>
    </div>

    <div id="tableWrap" class="table-wrap">
      <table id="mainTable" aria-label="기록표">
        <thead>
          <tr><th>#</th><th>이름</th><th class="amount">금액</th><th>비고</th><th class="actions">관리</th></tr>
        </thead>
        <tbody id="tbody"></tbody>
      </table>
    </div>

    <!-- controls fixed -->
    <div class="controls-fixed" style="margin-top:8px">
      <div class="controls-left">
        <button id="voiceBtn" class="control-button voice">음성입력</button>
        <button id="manualBtn" class="control-button manual">직접입력</button>
      </div>
      <div class="controls-right">
        <div id="sumBox" class="sum-box">합계: 0 원</div>
      </div>
    </div>
    <div class="footer-note">항목을 길게 누르거나 탭하면 수정할 수 있습니다.</div>
  </div>

  <!-- modals -->
  <!-- voice modal -->
  <div id="voiceModal" class="modal-backdrop" role="dialog" aria-hidden="true">
    <div class="modal-card">
      <div style="text-align:center">
        <div style="font-weight:700">음성 입력</div>
        <div class="small" style="margin-bottom:8px">이름(또는 회사명)과 금액을 한 번에 말하세요. 예: "홍길동 오천원"</div>
        <div class="mic-circle" id="micCircle"><div class="mic-icon">🎙️</div></div>
        <div id="voiceStatus" class="small" style="text-align:center">대기 중</div>
        <div style="display:flex;gap:8px;margin-top:12px;justify-content:center">
          <button id="voiceCancel" class="btn ghost">취소</button>
        </div>
      </div>
    </div>
  </div>

  <!-- voice fail confirm -->
  <div id="voiceFailModal" class="modal-backdrop" aria-hidden="true">
    <div class="modal-card">
      <div style="font-weight:700">음성인식에 실패했습니다.</div>
      <div class="small" style="margin-top:8px">다시 시도하시겠습니까?</div>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
        <button id="voiceFailCancel" class="btn ghost">취소</button>
        <button id="voiceFailRetry" class="btn primary">다시 시도</button>
      </div>
    </div>
  </div>

  <!-- manual modal -->
  <div id="manualModal" class="modal-backdrop" aria-hidden="true">
    <div class="modal-card">
      <div style="font-weight:700;margin-bottom:6px">직접 입력</div>
      <div style="display:flex;flex-direction:column;gap:8px">
        <input id="manualName" class="edit-input" placeholder="이름 또는 회사명" />
        <input id="manualAmount" class="edit-input" inputmode="numeric" placeholder="금액" />
      </div>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:10px">
        <button id="manualCancel" class="btn ghost">취소</button>
        <button id="manualOk" class="btn primary">확인</button>
      </div>
    </div>
  </div>

  <!-- start confirm modal -->
  <div id="startConfirmModal" class="modal-backdrop" aria-hidden="true">
    <div class="modal-card">
      <div style="font-weight:700">이전 데이터가 있습니다.</div>
      <div class="small" style="margin-top:8px">정말로 새로 시작하시겠습니까? (기존 데이터는 삭제됩니다)</div>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
        <button id="startCancel" class="btn ghost">취소</button>
        <button id="startOk" class="btn primary">확인</button>
      </div>
    </div>
  </div>

  <!-- small toast -->
  <div id="toast" class="toast" style="display:none"></div>
</div>

<!-- SheetJS for export -->
<script src="js/xlsx.full.min.js"></script>
<script type="text/javascript" defer src="js/main.js"></script>	

</body>
</html>
